# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ WinAPI Stubs V2

## –°—Ç–∞—Ç—É—Å

‚úÖ **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

- 442 —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
- 11 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (100%)

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≥–ª—É—à–µ–∫

**–°–æ–∑–¥–∞–Ω–æ:**
- `tools/download_headers.py` - –∑–∞–≥—Ä—É–∑–∫–∞ Windows SDK headers
- `tools/header_parser.py` - –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è WinAPI stubs
- `tools/download_directx_headers.py` - –∑–∞–≥—Ä—É–∑–∫–∞ DirectX SDK headers
- `tools/directx_parser.py` - –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è DirectX stubs

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ 436 WinAPI —Ñ—É–Ω–∫—Ü–∏–π (kernel32, advapi32, –∏ –¥—Ä.)
- ‚úÖ 6 DirectX —Ñ—É–Ω–∫—Ü–∏–π (D3D9/11/12, DXGI)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (API_REFERENCE.md)
- ‚úÖ JSON –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ë–∞–≥ —Å –º–∞—Å—Å–∏–≤–∞–º–∏ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö (`param[]` ‚Üí `param`)
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ –æ–±–æ–∏—Ö –ø–∞—Ä—Å–µ—Ä–∞—Ö
- ‚úÖ –í—Å–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

### 2. –ü–∞—Ç—Ç–µ—Ä–Ω –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

**–°–æ–∑–¥–∞–Ω–æ:**
- `tools/stub_override_pattern.py` - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞
- `src/core/winapi_stubs_v2.py` - –Ω–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å StubRegistry
- `STUB_OVERRIDE_GUIDE.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Layer 3: Custom (11 —Ñ—É–Ω–∫—Ü–∏–π, 2.5%) - —Ä—É—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
    ‚Üì
Layer 2: Generated (436 —Ñ—É–Ω–∫—Ü–∏–π, 97.5%) - –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
    ‚Üì
Layer 1: Default Fallback - –±–∞–∑–æ–≤–∞—è –∑–∞–≥–ª—É—à–∫–∞
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–æ–∑–¥–∞–Ω–æ:**
- `test_stub_override.py` - –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã WinAPI
- `test_directx_stubs.py` - —Ç–µ—Å—Ç—ã DirectX –∑–∞–≥–ª—É—à–µ–∫

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã WinAPI:**
```
‚úÖ PASS - StubRegistry Basic
‚úÖ PASS - Generated Stubs Loading
‚úÖ PASS - WinAPIStubsV2 Integration
‚úÖ PASS - Override Pattern

Total: 4/4 tests passed (100%)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã DirectX:**
```
‚úÖ PASS - DirectX Syntax Check
‚úÖ PASS - DirectX Import

Total: 2/2 tests passed (100%)
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LayeredEmulator

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

`src/core/layered_emulator.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π `winapi_stubs.py`:

```python
from winapi_stubs import WinAPIStubs

class LayeredEmulator:
    def __init__(self):
        # ...
        self.winapi = WinAPIStubs(self)
```

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–û—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞—é—â–∏–º, –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:

```python
from winapi_stubs import WinAPIStubs  # –°—Ç–∞—Ä—ã–π
from winapi_stubs_v2 import WinAPIStubsV2  # –ù–æ–≤—ã–π

class LayeredEmulator:
    def __init__(self, use_v2=False):
        # ...
        if use_v2:
            self.winapi = WinAPIStubsV2(self)
        else:
            self.winapi = WinAPIStubs(self)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
- ‚úÖ –õ–µ–≥–∫–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
# –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
emu = LayeredEmulator()

# –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
emu = LayeredEmulator(use_v2=True)
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞

–ó–∞–º–µ–Ω—è–µ–º —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –Ω–∞ –Ω–æ–≤—ã–π:

```python
from winapi_stubs_v2 import WinAPIStubsV2

class LayeredEmulator:
    def __init__(self):
        # ...
        self.winapi = WinAPIStubsV2(self)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ß–∏—Å—Ç—ã–π –∫–æ–¥
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ 442 —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ä–∞–∑—É

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥

–ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É, –Ω–æ —Å fallback –Ω–∞ —Å—Ç–∞—Ä—É—é:

```python
from winapi_stubs import WinAPIStubs
from winapi_stubs_v2 import WinAPIStubsV2

class LayeredEmulator:
    def __init__(self):
        # ...
        self.winapi_v2 = WinAPIStubsV2(self)
        self.winapi_legacy = WinAPIStubs(self)
    
    def call_winapi(self, name):
        # –ü—Ä–æ–±—É–µ–º –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
        stub = self.winapi_v2.registry.get(name.lower())
        if stub:
            return stub()
        
        # Fallback –Ω–∞ —Å—Ç–∞—Ä—É—é
        return self.winapi_legacy.call_stub(name)
```

## –®–∞–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ WinAPI –∑–∞–≥–ª—É—à–∫–∏
python test_stub_override.py

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DirectX –∑–∞–≥–ª—É—à–∫–∏
python test_directx_stubs.py
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
Total: 4/4 tests passed (100%) - WinAPI
Total: 2/2 tests passed (100%) - DirectX
üéâ All tests passed! System is ready to use.
```

### –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π
python demos/test_complex_antitamper.py
```

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö custom —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `src/core/winapi_stubs_v2.py`:

```python
def _register_custom_stubs(self):
    """–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π"""
    
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ...
    self.registry.register_custom('createfilea', self._custom_createfilea)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ
    self.registry.register_custom('getmodulehandlea', self._custom_getmodulehandlea)

def _custom_getmodulehandlea(self):
    """GetModuleHandleA() - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ–µ–π–∫–æ–≤—ã–π handle"""
    lpModuleName = self.uc.reg_read(UC_X86_REG_RCX)
    
    if lpModuleName == 0:
        # NULL = —Ç–µ–∫—É—â–∏–π –º–æ–¥—É–ª—å
        module_name = "current"
        handle = 0x400000
    else:
        module_name = self._read_string(lpModuleName)
        handle = 0x10000000 + hash(module_name) % 0x1000000
    
    print(f"[API] GetModuleHandleA('{module_name}') -> 0x{handle:x} [CUSTOM]")
    self.uc.reg_write(UC_X86_REG_RAX, handle)
    return handle
```

### –®–∞–≥ 4: –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ SDK

```bash
# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å SDK
python tools/download_headers.py
python tools/header_parser.py

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ù–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã!
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ü–æ–∫—Ä—ã—Ç–∏–µ API

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  WinAPI Functions:     436                              ‚îÇ
‚îÇ  DirectX Functions:      6                              ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                              ‚îÇ
‚îÇ  TOTAL:               442 —Ñ—É–Ω–∫—Ü–∏–∏                       ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ  Custom implementations: 11 (2.5%)                      ‚îÇ
‚îÇ  Generated stubs:       436 (97.5%)                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Custom —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (11 —Ñ—É–Ω–∫—Ü–∏–π)

**File I/O (5):**
- CreateFileA
- CreateFileW
- ReadFile
- WriteFile
- CloseHandle

**Memory (3):**
- HeapAlloc
- HeapFree
- VirtualAlloc

**Timing (3) - –ö–†–ò–¢–ò–ß–ù–û –¥–ª—è –∞–Ω—Ç–∏-—Ç–∞–º–ø–µ—Ä–∞:**
- GetTickCount
- QueryPerformanceCounter
- QueryPerformanceFrequency

### Generated –∑–∞–≥–ª—É—à–∫–∏ (436 —Ñ—É–Ω–∫—Ü–∏–π)

**kernel32.dll (254):**
- File I/O: 97 —Ñ—É–Ω–∫—Ü–∏–π
- Process/Thread: 81 —Ñ—É–Ω–∫—Ü–∏—è
- Synchronization: 49 —Ñ—É–Ω–∫—Ü–∏–π
- Library Loading: 30 —Ñ—É–Ω–∫—Ü–∏–π
- System Info: 29 —Ñ—É–Ω–∫—Ü–∏–π
- Memory: 28 —Ñ—É–Ω–∫—Ü–∏–π
- Error Handling: 18 —Ñ—É–Ω–∫—Ü–∏–π
- Heap: 12 —Ñ—É–Ω–∫—Ü–∏–π
- Performance: 2 —Ñ—É–Ω–∫—Ü–∏–∏

**advapi32.dll (91):**
- Registry: 91 —Ñ—É–Ω–∫—Ü–∏—è

**unknown.dll (91):**
- –†–∞–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Ç—Ä–µ–±—É—é—â–∏–µ —É—Ç–æ—á–Ω–µ–Ω–∏—è DLL

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ß—Ç–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö–†–ò–¢–ò–ß–ù–û**
- ‚úÖ Timing —Ñ—É–Ω–∫—Ü–∏–∏ (GetTickCount, QueryPerformanceCounter)
- ‚úÖ RDTSC (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ LayeredEmulator)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –í–ê–ñ–ù–û**
- ‚úÖ File I/O (CreateFile, ReadFile, WriteFile)
- ‚úÖ Memory (HeapAlloc, VirtualAlloc)
- ‚ö†Ô∏è Process/Thread (GetCurrentProcessId, CreateThread)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û**
- ‚ö†Ô∏è Registry (RegOpenKey, RegQueryValue)
- ‚ö†Ô∏è Network (socket, connect, send)
- ‚ö†Ô∏è DirectX (D3D11CreateDevice)

### –ß—Ç–æ –ù–ï –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å

- ‚ùå –†–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚ùå –§—É–Ω–∫—Ü–∏–∏, –≥–¥–µ fake –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã
- ‚ùå –§—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –∞–Ω—Ç–∏-—Ç–∞–º–ø–µ—Ä

**–ü—Ä–∞–≤–∏–ª–æ:** –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ. 97.5% —Ñ—É–Ω–∫—Ü–∏–π –º–æ–≥—É—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏.

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Failed to load generated stubs"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
python tools/header_parser.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: "SyntaxError in winapi_stubs_generated.py"

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–∞–≥ –≤ –ø–∞—Ä—Å–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞—Å—Å–∏–≤—ã `param[]`)

**–†–µ—à–µ–Ω–∏–µ:**
1. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º–Ω—É—é —Å—Ç—Ä–æ–∫—É
2. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø–∞—Ä—Å–µ—Ä –≤ `tools/header_parser.py`
3. –†–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: `python tools/header_parser.py`

### –ü—Ä–æ–±–ª–µ–º–∞: "Custom stub not working"

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```python
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ custom –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
stats = stubs.get_stats()
print(f"Custom: {stats['custom']}")

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤ custom
print(stubs.registry.has_custom('createfilea'))
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Stub returns wrong value"

**–û—Ç–ª–∞–¥–∫–∞:**
```python
# –î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
def _custom_createfilea(self):
    lpFileName = self.uc.reg_read(UC_X86_REG_RCX)
    filename = self._read_string(lpFileName)
    
    print(f"[DEBUG] CreateFileA called")
    print(f"[DEBUG] lpFileName = 0x{lpFileName:x}")
    print(f"[DEBUG] filename = '{filename}'")
    
    # ... –ª–æ–≥–∏–∫–∞ ...
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –¥–Ω—è)

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏
2. ‚ö†Ô∏è –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ LayeredEmulator (–í–∞—Ä–∏–∞–Ω—Ç 1)
3. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å 5-10 –Ω–æ–≤—ã—Ö custom —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1 –Ω–µ–¥–µ–ª—è)

4. ‚ö†Ô∏è –£–ª—É—á—à–∏—Ç—å –ø–∞—Ä—Å–µ—Ä –¥–ª—è –±–æ–ª—å—à–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (winuser.h)
5. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å COM –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è DirectX
6. ‚ö†Ô∏è –°–æ–∑–¥–∞—Ç—å forward-–æ–±—ë—Ä—Ç–∫–∏ (C/C++ DLL)

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (1 –º–µ—Å—è—Ü)

7. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å user32.dll (GUI)
8. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å ws2_32.dll (Network)
9. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å OpenGL/Vulkan
10. ‚ö†Ô∏è –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ —Å—Ç–∞—Ä–æ–≥–æ winapi_stubs.py

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≥–ª—É—à–µ–∫ **–≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**:

- ‚úÖ 442 —Ñ—É–Ω–∫—Ü–∏–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ 11 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞
- ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

**–≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:**
- –í–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è 442 —Ñ—É–Ω–∫—Ü–∏–π (~44 —á–∞—Å–∞)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞ 2 –º–∏–Ω—É—Ç—ã
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ 11 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (~2 —á–∞—Å–∞)

**–ò—Ç–æ–≥–æ: —ç–∫–æ–Ω–æ–º–∏—è ~42 —á–∞—Å–∞ —Ä–∞–±–æ—Ç—ã!** üöÄ

---

**–î–∞—Ç–∞:** 2026-01-30  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
