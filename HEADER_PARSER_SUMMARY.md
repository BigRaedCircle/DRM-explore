# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è WinAPI –∑–∞–≥–ª—É—à–µ–∫ - –ì–û–¢–û–í–û ‚úÖ

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–≥–ª—É—à–µ–∫ WinAPI –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ Windows SDK.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. `tools/download_headers.py`
–°–∫–∞—á–∏–≤–∞–µ—Ç/–∫–æ–ø–∏—Ä—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Windows SDK.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–∞–π–¥–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π Windows SDK
- ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ **15 –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–æ 5 DLL (kernel32, user32, advapi32, ws2_32, gdi32)

### 2. `tools/header_parser.py`
–ü–∞—Ä—Å–∏—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç Python –∑–∞–≥–ª—É—à–∫–∏.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –†–∞—Å–ø–∞—Ä—Å–µ–Ω–æ **11 –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤**
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ **436 —Ñ—É–Ω–∫—Ü–∏–π**
- ‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ 3 —Ñ–∞–π–ª–∞:
  - `winapi_stubs_generated.py` - Python –∑–∞–≥–ª—É—à–∫–∏
  - `API_REFERENCE.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  - `functions.json` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 3. `tools/README.md`
–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã.

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
Total functions: 436

–ü–æ DLL:
- kernel32.dll:  254 —Ñ—É–Ω–∫—Ü–∏–∏ (File I/O, Process, Memory, Sync, etc.)
- advapi32.dll:   91 —Ñ—É–Ω–∫—Ü–∏—è  (Registry, Security)
- unknown.dll:    91 —Ñ—É–Ω–∫—Ü–∏—è  (—Ç—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è)

–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
- File I/O:           97 —Ñ—É–Ω–∫—Ü–∏–π (fileapi.h)
- Process/Thread:     81 —Ñ—É–Ω–∫—Ü–∏—è (processthreadsapi.h)
- Synchronization:    49 —Ñ—É–Ω–∫—Ü–∏–π (synchapi.h)
- Library Loading:    30 —Ñ—É–Ω–∫—Ü–∏–π (libloaderapi.h)
- System Info:        29 —Ñ—É–Ω–∫—Ü–∏–π (sysinfoapi.h)
- Memory:             28 —Ñ—É–Ω–∫—Ü–∏–π (memoryapi.h)
- Error Handling:     18 —Ñ—É–Ω–∫—Ü–∏–π (errhandlingapi.h)
- Heap:               12 —Ñ—É–Ω–∫—Ü–∏–π (heapapi.h)
- Performance:         2 —Ñ—É–Ω–∫—Ü–∏–∏ (profileapi.h)
- Registry:           91 —Ñ—É–Ω–∫—Ü–∏—è (winreg.h)
```

## –ü—Ä–∏–º–µ—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∑–∞–≥–ª—É—à–∫–∏

```python
def _stub_createfilea(self):
    """CreateFileA() - HANDLE WINAPI
    Parameters:
        LPCSTR lpFileName
        DWORD dwDesiredAccess
        DWORD dwShareMode
        LPSECURITY_ATTRIBUTES lpSecurityAttributes
        DWORD dwCreationDisposition
        DWORD dwFlagsAndAttributes
        HANDLE hTemplateFile
    Source: fileapi.h
    """
    lpFileName = self.uc.reg_read(UC_X86_REG_RCX)
    dwDesiredAccess = self.uc.reg_read(UC_X86_REG_RDX)
    dwShareMode = self.uc.reg_read(UC_X86_REG_R8)
    lpSecurityAttributes = self.uc.reg_read(UC_X86_REG_R9)
    print(f"[API] CreateFileA()")
    
    # TODO: Implement stub logic
    
    self.uc.reg_write(UC_X86_REG_RAX, 0)  # TODO: Return proper value
    return 0
```

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```bash
# 1. –°–∫–∞—á–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏
python tools/download_headers.py

# 2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥–ª—É—à–∫–∏
python tools/header_parser.py

# 3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ tools/generated/
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —ç–º—É–ª—è—Ç–æ—Ä

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**
```python
# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏
from tools.generated.winapi_stubs_generated import *
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –í—ã–±–æ—Ä–æ—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**
```python
# –ö–æ–ø–∏—Ä—É–µ–º –Ω—É–∂–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –ª–æ–≥–∏–∫—É
def _stub_createfilea(self):
    lpFileName = self.uc.reg_read(UC_X86_REG_RCX)
    filename = self._read_string(lpFileName)
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º VirtualFileSystem
    handle = self.emu.vfs.open(filename, ...)
    self.uc.reg_write(UC_X86_REG_RAX, handle)
    return handle
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø–∏—Å–∞—Ç—å 400+ –∑–∞–≥–ª—É—à–µ–∫
2. ‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å** - —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö Windows SDK headers
3. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
4. ‚úÖ **–û–±–Ω–æ–≤–ª—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
5. ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –≤—Å–µ—Ö –∑–∞–≥–ª—É—à–µ–∫

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞–≥–ª—É—à–∫–∞–º–∏ –≤ `src/core/winapi_stubs.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (File I/O, Memory, Process)
- [ ] –û—Å—Ç–∞–≤–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞–∫ "fake but valid"

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å user32.dll (GUI —Ñ—É–Ω–∫—Ü–∏–∏)
- [ ] –î–æ–±–∞–≤–∏—Ç—å ws2_32.dll (Network)
- [ ] –£–ª—É—á—à–∏—Ç—å –ø–∞—Ä—Å–µ—Ä –¥–ª—è –±–æ–ª—å—à–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (winuser.h, winbase.h)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: Forward-–æ–±—ë—Ä—Ç–∫–∏
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è C/C++ forward wrappers
- [ ] –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤ DLL –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–π –ø–æ–¥–º–µ–Ω—ã

## –§–∞–π–ª—ã

```
tools/
‚îú‚îÄ‚îÄ download_headers.py          # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
‚îú‚îÄ‚îÄ header_parser.py             # –ü–∞—Ä—Å–∏–Ω–≥ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ README.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ headers/                     # –°–∫–∞—á–∞–Ω–Ω—ã–µ .h —Ñ–∞–π–ª—ã (15 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ fileapi.h
‚îÇ   ‚îú‚îÄ‚îÄ processthreadsapi.h
‚îÇ   ‚îú‚îÄ‚îÄ memoryapi.h
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ generated/                   # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
    ‚îú‚îÄ‚îÄ winapi_stubs_generated.py  # 436 Python –∑–∞–≥–ª—É—à–µ–∫
    ‚îú‚îÄ‚îÄ API_REFERENCE.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ functions.json             # JSON –¥–∞–Ω–Ω—ã–µ
```

## –ò—Ç–æ–≥

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ WinAPI –∑–∞–≥–ª—É—à–µ–∫:
- ‚úÖ **436 —Ñ—É–Ω–∫—Ü–∏–π** –∏–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ Windows SDK
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** Python –∫–æ–¥–∞
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
- ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** –≤ —ç–º—É–ª—è—Ç–æ—Ä

–¢–µ–ø–µ—Ä—å –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–∞–∂–¥–æ–π –∑–∞–≥–ª—É—à–∫–∏, –º—ã –º–æ–∂–µ–º:
1. –î–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–π .h —Ñ–∞–π–ª –≤ —Å–ø–∏—Å–æ–∫
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä
3. –ü–æ–ª—É—á–∏—Ç—å –≥–æ—Ç–æ–≤—ã–µ –∑–∞–≥–ª—É—à–∫–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º–∏

**–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!** üéâ
