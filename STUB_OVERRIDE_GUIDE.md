# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –∑–∞–≥–ª—É—à–µ–∫

## –ü—Ä–æ–±–ª–µ–º–∞

–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏ - —ç—Ç–æ **—à–∞–±–ª–æ–Ω—ã**. –û–Ω–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã, –Ω–æ –Ω–µ –∏–º–µ—é—Ç —Ä–µ–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏. –ù—É–∂–µ–Ω —Å–ø–æ—Å–æ–± **–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å** –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ **–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.

## –†–µ—à–µ–Ω–∏–µ: –°–ª–æ—ë–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Layer 3: Custom Implementations        ‚îÇ
‚îÇ  (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–®–ò–ô)                    ‚îÇ
‚îÇ  - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π  ‚îÇ
‚îÇ  - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –≤ winapi_stubs_v2.py    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì (–µ—Å–ª–∏ –Ω–µ—Ç custom)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Layer 2: Generated Stubs               ‚îÇ
‚îÇ  (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)                   ‚îÇ
‚îÇ  - –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã           ‚îÇ
‚îÇ  - –ù–ï –¢–†–û–ì–ê–ï–ú! –†–µ–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–∞—Ä—Å–µ—Ä–æ–º  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì (–µ—Å–ª–∏ –Ω–µ—Ç generated)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Layer 1: Default Fallback              ‚îÇ
‚îÇ  (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ò–ó–®–ò–ô)                    ‚îÇ
‚îÇ  - –ë–∞–∑–æ–≤–∞—è –∑–∞–≥–ª—É—à–∫–∞ (return 0)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ü–∞—Ç—Ç–µ—Ä–Ω: StubRegistry

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

```python
class StubRegistry:
    def __init__(self):
        self.generated = {}  # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (–ù–ï –¢–†–û–ì–ê–¢–¨!)
        self.custom = {}     # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ (–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º)
    
    def get(self, name):
        # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: custom > generated > None
        return self.custom.get(name) or self.generated.get(name)
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - generated –∏ custom –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
2. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–µ —Ç—Ä–æ–≥–∞–µ–º
3. ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–µ–º –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ª—é–±—É—é —Ñ—É–Ω–∫—Ü–∏—é
4. ‚úÖ **–û–±–Ω–æ–≤–ª—è–µ–º–æ—Å—Ç—å** - —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç custom
5. ‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤–∏–¥–Ω–æ, —á—Ç–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, –∞ —á—Ç–æ –Ω–µ—Ç

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
tools/generated/
‚îú‚îÄ‚îÄ winapi_stubs_generated.py    # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (–ù–ï –¢–†–û–ì–ê–¢–¨!)
‚îî‚îÄ‚îÄ directx_stubs_generated.py   # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (–ù–ï –¢–†–û–ì–ê–¢–¨!)

src/core/
‚îú‚îÄ‚îÄ winapi_stubs_v2.py           # –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å Registry
‚îú‚îÄ‚îÄ winapi_custom.py             # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îî‚îÄ‚îÄ winapi_decorators.py         # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö –∑–∞–≥–ª—É—à–µ–∫

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º 436 —Ñ—É–Ω–∫—Ü–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
python tools/header_parser.py
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: `tools/generated/winapi_stubs_generated.py`

```python
def _stub_createfilea(self):
    """CreateFileA() - HANDLE WINAPI"""
    lpFileName = self.uc.reg_read(UC_X86_REG_RCX)
    print(f"[API] CreateFileA()")
    # TODO: Implement stub logic
    self.uc.reg_write(UC_X86_REG_RAX, 0)
    return 0
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

–í `src/core/winapi_stubs_v2.py`:

```python
def _register_custom_stubs(self):
    """–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π"""
    
    # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º CreateFileA —Å —Ä–µ–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
    self.registry.register_custom('createfilea', self._custom_createfilea)

def _custom_createfilea(self):
    """CreateFileA() - —Å —Ä–µ–∞–ª—å–Ω–æ–π VFS"""
    lpFileName = self.uc.reg_read(UC_X86_REG_RCX)
    filename = self._read_string(lpFileName)
    
    print(f"[API] CreateFileA('{filename}') [CUSTOM]")
    
    # –†–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
    handle = self.emu.vfs.open(filename, ...)
    self.uc.reg_write(UC_X86_REG_RAX, handle)
    return handle
```

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —ç–º—É–ª—è—Ç–æ—Ä–µ

```python
from src.core.winapi_stubs_v2 import WinAPIStubsV2

class LayeredEmulator:
    def __init__(self):
        # ...
        self.winapi = WinAPIStubsV2(self)
        
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        stats = self.winapi.get_stats()
        print(f"Custom: {stats['custom']}/{stats['total']} ({stats['custom_percentage']:.1f}%)")
        # Output: Custom: 11/436 (2.5%)
```

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–ª—è –∞–Ω—Ç–∏-—Ç–∞–º–ø–µ—Ä–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

```python
# Timing - –ö–†–ò–¢–ò–ß–ù–û!
'gettickcount'
'queryperformancecounter'
'queryperformancefrequency'

# RDTSC –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ LayeredEmulator
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```python
# File I/O
'createfilea', 'createfilew'
'readfile', 'writefile'
'closehandle'

# Memory
'heapalloc', 'heapfree'
'virtualalloc', 'virtualfree'

# Process/Thread
'getcurrentprocessid', 'getcurrentthreadid'
'sleep'
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –û—Å—Ç–∞–ª—å–Ω—ã–µ (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

```python
# 420+ —Ñ—É–Ω–∫—Ü–∏–π –æ—Å—Ç–∞—é—Ç—Å—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏
# –í–æ–∑–≤—Ä–∞—â–∞—é—Ç "fake but valid" –∑–Ω–∞—á–µ–Ω–∏—è
# –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ DRM
```

## –ü—Ä–∏–º–µ—Ä—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è

```python
def _custom_getcurrentprocessid(self):
    """GetCurrentProcessId() - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ–µ–π–∫–æ–≤—ã–π PID"""
    pid = 12345
    print(f"[API] GetCurrentProcessId() -> {pid} [CUSTOM]")
    self.uc.reg_write(UC_X86_REG_RAX, pid)
    return pid
```

### –ü—Ä–∏–º–µ—Ä 2: –§—É–Ω–∫—Ü–∏—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```python
def _custom_sleep(self):
    """Sleep() - –ø—Ä–æ–¥–≤–∏–≥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è"""
    ms = self.uc.reg_read(UC_X86_REG_RCX)
    print(f"[API] Sleep({ms} ms) [CUSTOM]")
    
    # –ü—Ä–æ–¥–≤–∏–≥–∞–µ–º VirtualClock
    ticks = ms * self.emu.clock.cpu_freq_mhz * 1000
    self.emu.clock.advance(ticks)
    
    return 0
```

### –ü—Ä–∏–º–µ—Ä 3: –§—É–Ω–∫—Ü–∏—è —Å –≤—ã—Ö–æ–¥–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```python
def _custom_queryperformancecounter(self):
    """QueryPerformanceCounter() - –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä"""
    lpPerformanceCount = self.uc.reg_read(UC_X86_REG_RCX)
    
    counter = self.emu.clock.query_performance_counter()
    print(f"[API] QueryPerformanceCounter() -> {counter} [CUSTOM]")
    
    # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–∞–º—è—Ç—å (–≤—ã—Ö–æ–¥–Ω–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä)
    if lpPerformanceCount:
        self.uc.mem_write(lpPerformanceCount, counter.to_bytes(8, 'little'))
    
    self.uc.reg_write(UC_X86_REG_RAX, 1)  # TRUE
    return 1
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

### –ü–æ–¥—Ö–æ–¥ 1: –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (–ø—Ä–æ—â–µ, –Ω–æ –º–µ–Ω–µ–µ –≥–∏–±–∫–æ)

```python
class GeneratedStubs:
    """–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏"""
    def _stub_createfilea(self):
        print("[API] CreateFileA() [GENERATED]")
        return 0

class CustomStubs(GeneratedStubs):
    """–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω—É–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏"""
    def _stub_createfilea(self):
        print("[API] CreateFileA() [CUSTOM]")
        # –†–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
        return handle
```

**–ú–∏–Ω—É—Å—ã:**
- –ù—É–∂–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞
- –°–ª–æ–∂–Ω–µ–µ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, —á—Ç–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

### –ü–æ–¥—Ö–æ–¥ 2: –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã (–¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∞ –Ω–µ –∑–∞–º–µ–Ω—ã)

```python
def logging_decorator(func):
    """–î–æ–±–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏"""
    def wrapper(*args, **kwargs):
        print(f"[TRACE] Calling {func.__name__}")
        result = func(*args, **kwargs)
        print(f"[TRACE] Returned {result}")
        return result
    return wrapper

# –ü—Ä–∏–º–µ–Ω—è–µ–º –∫ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∑–∞–≥–ª—É—à–∫–µ
registry.add_decorator('createfilea', logging_decorator)
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù—É–∂–Ω–æ –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –≤—ã–∑–æ–≤—ã
- –ù—É–∂–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ù–ï –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É

### –ü–æ–¥—Ö–æ–¥ 3: Registry (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```python
registry = StubRegistry()
registry.register_generated('createfilea', generated_func)
registry.register_custom('createfilea', custom_func)

# –ü–æ–ª—É—á–∞–µ–º custom (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—à–µ)
stub = registry.get('createfilea')
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –Ø–≤–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- ‚úÖ –õ–µ–≥–∫–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- ‚úÖ –ù–µ —Ç—Ä–æ–≥–∞–µ–º –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å

## Workflow

### 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥–ª—É—à–∫–∞
grep -r "def _stub_createfilea" tools/generated/

# 2. –ï—Å–ª–∏ –µ—Å—Ç—å - –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≤ winapi_stubs_v2.py
# 3. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ download_headers.py –∏ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ SDK

```bash
# 1. –†–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∑–∞–≥–ª—É—à–∫–∏
python tools/header_parser.py

# 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ù–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã!
# 3. –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—è–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### 3. –û—Ç–ª–∞–¥–∫–∞

```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∞—è –≤–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
stub = registry.get('createfilea')
print(f"Using: {'CUSTOM' if registry.has_custom('createfilea') else 'GENERATED'}")

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
stats = winapi.get_stats()
print(f"Custom: {stats['custom']}/{stats['total']}")
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ DO:
1. –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ **–∫—Ä–∏—Ç–∏—á–Ω—ã–µ** —Ñ—É–Ω–∫—Ü–∏–∏ (timing, file I/O, memory)
2. –û—Å—Ç–∞–≤–ª—è–π—Ç–µ **–æ—Å—Ç–∞–ª—å–Ω—ã–µ** –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏
3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ **–ø–æ—á–µ–º—É** –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **[CUSTOM]** –º–∞—Ä–∫–µ—Ä –≤ –ª–æ–≥–∞—Ö

### ‚ùå DON'T:
1. –ù–ï –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ `tools/generated/*.py` –≤—Ä—É—á–Ω—É—é
2. –ù–ï –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ –≤—Å—ë –ø–æ–¥—Ä—è–¥ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ 10-20 —Ñ—É–Ω–∫—Ü–∏–π)
3. –ù–ï –¥—É–±–ª–∏—Ä—É–π—Ç–µ –∫–æ–¥ –º–µ–∂–¥—É custom –∏ generated
4. –ù–ï –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

## –ò—Ç–æ–≥

**–ü–∞—Ç—Ç–µ—Ä–Ω StubRegistry** –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 436 –∑–∞–≥–ª—É—à–µ–∫
- ‚úÖ –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ 10-20 —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ù–µ —Ç—Ä–æ–≥–∞—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
- ‚úÖ –õ–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö SDK
- ‚úÖ –í–∏–¥–µ—Ç—å, —á—Ç–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, –∞ —á—Ç–æ –Ω–µ—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 2.5% –∫–æ–¥–∞ –ø–∏—à–µ–º –≤—Ä—É—á–Ω—É—é, 97.5% –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! üöÄ
